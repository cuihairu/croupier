---
title: 故障排除
---
# 常见问题

签名校验失败（401/403）
- 症状：返回 401/403，日志含 "signature invalid" 或 "timestamp skew"
- 排查：检查 `X-Timestamp` 与服务器时钟偏差；确认 HMAC 串拼接顺序与 secret 一致
- 解决：同步时间（NTP）、适当放宽 `ANALYTICS_INGEST_SKEW`

被限流（429）
- 症状：短时间返回 429
- 排查：查看 Ingestion 限流规则（按游戏/环境/来源）
- 解决：降低上报频率或申请配额；确认客户端重试退避策略

数据延迟
- 症状：看板延迟 5~15 分钟
- 排查：Redis/Kafka 积压、Worker 错误日志、ClickHouse 写入延迟
- 解决：扩容 Worker、调整批量与 flush 周期、开启死信旁路

维度爆炸/查询很慢
- 症状：ClickHouse 查询超时或扫描量过大
- 排查：高基数字段（如 uid、ip、trace_id）是否被错误作为维度聚合
- 解决：对高基数做采样/哈希聚合；拆分明细表与聚合表；限制自由查询

仪表板空白
- 症状：Grafana 面板无数据
- 排查：数据源配置、查询时间范围、预置变量、表名/列名
- 解决：先用 SQL 验证数据，再修正面板查询
