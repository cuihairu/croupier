# Croupier API å¯¼å…¥æŒ‡å—

æœ¬æ–‡æ¡£æä¾›äº†å°† Croupier API å¯¼å…¥åˆ°å„ç§ API æµ‹è¯•å·¥å…·çš„æ–¹æ³•ã€‚

## ğŸ“‹ ç”Ÿæˆçš„æ–‡ä»¶

1. **croupier-api.json** - OpenAPI/Swagger è§„èŒƒæ–‡ä»¶
2. **croupier-api-environments.json** - Postman ç¯å¢ƒé…ç½®
3. **croupier-apifox-collection.json** - APIfox é›†åˆæ–‡ä»¶
4. **croupier-api.postman_collection.json** - å®Œæ•´çš„ Postman é›†åˆ

## ğŸš€ å¯¼å…¥æ–¹æ³•

### 1. Postman å¯¼å…¥

#### æ–¹æ³•ä¸€ï¼šå¯¼å…¥ OpenAPI è§„èŒƒ
1. æ‰“å¼€ Postman
2. ç‚¹å‡» "Import" â†’ "Link"
3. è¾“å…¥æ–‡ä»¶è·¯å¾„æˆ–ç²˜è´´ JSON å†…å®¹
4. é€‰æ‹© "OpenAPI 3.0"

#### æ–¹æ³•äºŒï¼šå¯¼å…¥é›†åˆæ–‡ä»¶
1. æ‰“å¼€ Postman
2. ç‚¹å‡» "Import" â†’ "Files"
3. é€‰æ‹© `croupier-api.postman_collection.json`
4. å¯¼å…¥ç¯å¢ƒé…ç½® `croupier-api-environments.json`

### 2. APIfox å¯¼å…¥

1. æ‰“å¼€ APIfox
2. ç‚¹å‡» "å¯¼å…¥" â†’ "OpenAPI/Swagger"
3. ä¸Šä¼  `croupier-api.json`
4. æˆ–è€…é€‰æ‹© "Postman" æ ¼å¼å¯¼å…¥ `croupier-apifox-collection.json`

### 3. å…¶ä»–å·¥å…·

#### Swagger UI
```bash
# ä½¿ç”¨ Docker è¿è¡Œ Swagger UI
docker run -p 80:8080 -e SWAGGER_JSON=/croupier-api.json -v $(pwd)/croupier-api.json:/croupier-api.json swaggerapi/swagger-ui
```

#### Redoc
```bash
# å®‰è£… Redoc CLI
npm install -g redoc-cli

# ç”Ÿæˆ HTML æ–‡æ¡£
redoc-cli build croupier-api.json
```

## ğŸ”§ ç¯å¢ƒé…ç½®

### å¼€å‘ç¯å¢ƒ (æœ¬åœ°)
- API æœåŠ¡: http://localhost:8888
- Agent æœåŠ¡: http://localhost:8889
- Edge æœåŠ¡: http://localhost:8890

### è®¤è¯æ–¹å¼
1. é¦–å…ˆè°ƒç”¨ `POST /api/auth/sessions` ç™»å½•è·å– token
2. åœ¨åç»­è¯·æ±‚ä¸­ä½¿ç”¨ `Authorization: Bearer {{token}}`

## ğŸ“Š æœåŠ¡æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯ UI   â”‚â”€â”€â”€â–¶â”‚  API æœåŠ¡   â”‚â”€â”€â”€â–¶â”‚  æ¸¸æˆæœåŠ¡   â”‚
â”‚             â”‚    â”‚  (8888)     â”‚    â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚                   â”‚
                          â–¼                   â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ Agent æœåŠ¡  â”‚    â”‚ Edge æœåŠ¡   â”‚
                   â”‚  (8889)     â”‚    â”‚  (8890)     â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## âœ… å¿«é€ŸéªŒè¯

å¯¼å…¥é…ç½®åï¼ŒæŒ‰ä»¥ä¸‹æ­¥éª¤éªŒè¯ï¼š

1. **é€‰æ‹©ç¯å¢ƒ**: é€‰æ‹©"å¼€å‘ç¯å¢ƒ"
2. **ç™»å½•è®¤è¯**: è°ƒç”¨ç™»å½•æ¥å£è·å– token
3. **æµ‹è¯• API**: ä½¿ç”¨ token æµ‹è¯•å…¶ä»–æ¥å£
4. **æ£€æŸ¥å“åº”**: ç¡®è®¤è¿”å›æ•°æ®æ ¼å¼æ­£ç¡®

## ğŸ› ï¸ å¸¸è§é—®é¢˜

### Q: æç¤º 401 æœªæˆæƒï¼Ÿ
A: ç¡®ä¿å…ˆè°ƒç”¨ç™»å½•æ¥å£è·å– tokenï¼Œå¹¶åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦ `Authorization: Bearer {{token}}`

### Q: æç¤ºè¿æ¥å¤±è´¥ï¼Ÿ
A: ç¡®è®¤æœ¬åœ°æœåŠ¡å·²å¯åŠ¨ï¼Œæ£€æŸ¥ç«¯å£æ˜¯å¦æ­£ç¡®

### Q: å¯¼å…¥å¤±è´¥ï¼Ÿ
A: æ£€æŸ¥ JSON æ–‡ä»¶æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼Œå»ºè®®ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨éªŒè¯

---

**æç¤º**: ç”Ÿæˆè¿™äº›é…ç½®çš„å‘½ä»¤ï¼š
```bash
./generate-api-docs.sh
```
